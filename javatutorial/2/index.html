<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type="module" src="/sofi/js/script.js"></script>
<link rel="stylesheet" href="/sofi/css/estil.css">

<nav></nav>
<header>
    <h1>Escanejar variables</h1>

    <abstract>
        <p>En aquesta activitat aprendràs a fer programes interactius, que demanen 
            dades i després les utilitzen.
        </p>
        <p>Aprendràs:</p>
        <check>Què són les variables i com utilitzar-les</check>
        <check>Com obtenir dades de l'entrada estàndard i guardar-les en variables</check>
    </abstract>
</header>

<section>
    <h2>Tipus i variables</h2>
    <h3>Declaració i inicialització</h3>

    <p>Una <strong>variable</strong> és un espai reservat a la memòria per a
    emmagatzemar valors d'un tipus particular: un string, un número, o altres.
    Cada variable té un <strong>nom</strong> (o <strong>identificador</strong>)
    per a distingir-la d'altres. Abans d'utilitzar una variable, l'has de declarar.
    </p>

    <p>La forma general de declarar una variable és així:</p>

    <sc java>
        TipusDada nomVariable = inicialitacio;
    </sc>

    <p>La part esquerra d'aquesta sentència descriu la variable, i la part dreta
        descriu el valor que se li ha assignat.
    </p>
    <ul>
        <li>El <strong>tipus</strong> de la variable determina quines possibles
        operacions es poden realitzar sobre la variable i quins valors es poden
        guardar en ella. Aquí hem utilitzat un tipus de dada que no existeix 
        (<w>TipusDada</w>) per a demostrar la forma general de declaració.</li>
        <li>El <strong>nom</strong> (o <strong>identificador</strong>) distingeix
        la variable de les altres. El nom d'una variable no pot començar amb un dígit;
        normalment comença amb una lletra. Sempre s'ha de tractar de escollir noms
        amb significat i que siguin legibles per a fer el codi més fàcil d'entendre.
        </li>
        <li>L'<strong>operador d'assignació</strong> denotat amb <w>=</w> s'utilitza
        per a assignar un valor o un resultat d'una expressió a una variable.</li>
        <li>La <strong>inicialització</strong> és un valor que se li assigna a una
        variable.</li>
    </ul>
    <p>D'acord amb això, podem declarar una variable de tipus <w>String</w> i 
    assignar-li la paraula <string>java</string>:</p>

    <sc java>
        String llenguatge = "java";
    </sc>
    <img src="img/memoria1.png">

    <p>També podem declarar una variable de tipus <w>int</w> i guardar en ella un 
    número enter:</p>

    <sc java>
        int nombreDePomes = 5;
    </sc>
    <img src="img/memoria2.png">


    <warn>
        <p>Lés majúscules i minúscules importen! No és el mateix <w>llenguatge</w>
        que <w>Llenguatge</w>.</p>
    </warn>

    <p>Les variables no solament poden emmagatzemar strings i enters, sinò també 
        caracters, booleans, decimals, i altres tipus que veurem més endavant.
    </p>

    <info>
        <p>Una forma habitual d’entendre les variables és imaginar una variable com una <strong>capsa</strong> 
            on s’hi emmagatzema una dada o valor.</p>
        <img src="img/variable1.png">
        <hr>
        
        <p>Així, hi ha capses de diferents colors, per a emmagatzemar diferents
            <strong>tipus de dades</strong>.
        <br>Per exemple, capses blaves per a <w>String</w> i capses verdes per a <w>int</w>:</p>
        <img src="img/variable2.png">
        <hr>
        
        <p>A les capses se'ls hi ha de posar un <strong>identificador</strong> per
        a distingir-les. L'identificador ha de descriure la dada que s'hi guardarà.</p>
        <img src="img/variable3.png">
        <hr>
        
        <p>Per exemple, si es volen guardar el nom i l'edat d'una persona, es poden
            tenir aquestes capses:
        </p>
        <img src="img/variable4.png">
        <hr>
        
        <p>En cadascuna d'elles s'emmagatzema el valor corresponent:</p>
        <img src="img/variable5.png">
        <sc java>
            String nom = "Joan";
            int edat = 24;
        </sc>
        <hr>

        <p>És un <strong>error</strong> tractar de guardar un tipus de dada en el tipus
        de capsa inadequat:</p>
        <img src="img/variable6.png">
        <sc java>
            int edat = "Joan";  // error!, la variable és int i el valor string
        </sc>
        <hr>

        <p>Per una altra banda, és vàlid posar els <strong>identificadors</strong> que 
            desitjem a les capses, però s'entendrà millor si posem un nom que descrigui
            la dada que s'hi ha de guardar:
        </p>
        <img src="img/variable7.png">
        <sc java>
            int nom = 24; // vàlid! però no té sentit ¿?¿?
        </sc>
        
        </p>
    </info>

    <challenge>
        <p>Resol aquest problema:
            <br>
            <a href="https://www.hackerrank.com/contests/dam-m3/challenges/declaracio-invalida-de-variables">Declaració invàlida de variables</a>
        </p>
    </challenge>

    <h3>Accedir al valor d'una variable</h3>

    <p>Un cop una variable ha estat declarada, el seu valor pot ser accedit i 
        modificat utilitzant el seu nom (identificador). En aquest exemple, declarem
        una variable i després l'imprimim:
    </p>

    <sc java>
        String diaDeLaSetmana = "Dilluns";
        System.out.println(diaDeLaSetmana); // Dilluns
    </sc>

    <p>També es possible assignar el valor d'una variable a una altra variable. A la
        línia <ln>2</ln> d'aquest codi estem assignant a <w>avui</w> el valor de <w>diaDelMes</w>:
    </p>
    <sc java data-line="2">
        int diaDelMes = 25;
        int avui = diaDelMes;
        System.out.println(avui); // 25
        System.out.println(diaDelMes); // 25
    </sc>
    <img src="img/variable8.png">

    <observe>
        <p>És important notar que no es perd el valor d'una variable quan l'assignem a una altra variable.</p>
    </observe>

    <p>Una característica important de les variables és que el seu valor pot canviar.
        No s'ha de tornar a declarar la variable per a canviar-li el valor; únicament
        se li ha d'assignar el nou valor utilitzant l'operador <w>=</w>.
    </p>
    <p>Anem a declarar una variable anomenada <w>diaDeLaSetmana</w> i imprimirem
    el seu valor abans i després de canviar-li'l:</p>
    <sc java>
        String diaDeLaSetmana = "Dilluns";
        System.out.println(diaDeLaSetmana); // Dilluns

        diaDeLaSetmana = "Dimarts";
        System.out.println(diaDeLaSetmana); // Dimarts
    </sc>
    

    <p>Hi ha una restricció en les variables: només pots assignar un valor del mateix
        tipus que el tipus inicial de la variable. Així, el següent codi és incorrecte</p>
    <sc java>
        int dia = 10;    // ok
        dia = 11;        // ok
        dia = "Dilluns"; // error! El tipus inicial era int
    </sc>
    </p>

    <challenge>
        <p>Exercicis:
            <br>
            <a href="https://www.hackerrank.com/contests/dam-m3/challenges/assignacions">Assignacions</a>
            <br>
            <a href="https://www.hackerrank.com/contests/dam-m3/challenges/completa-la-declaracio">Completa la declaració</a>            
        </p>
    </challenge>

    <h3>Formes alternatives de declaració</h3>
    <p>Hi han vàries formes alternatives de declarar variables que són menys 
        utilitzades en la pràctica. Aquí hi han alguns exemples:
    </p>
    <ul>
        <li>
            <p>Declarar vàries variables <strong>del mateix tipus</strong>
            en una única sentència separant-les amb comes <w>,</w></p>
            <sc java>
                String llenguatge = "java", versio = "8 o superior";
            </sc>
        </li>
        <li>
            <p>Separar la declaració i la inicialització:</p>
            <sc java data-line="1,2">
                int edat;   // declaració
                edat = 18;  // inicialització
            </sc>

            <ul>
                <li>
                    <p>A la línia <ln>1</ln>, reservem un espai a la memòria
                        per a guardar un <w>int</w> i l'identifiquem amb <w>edat</w>.
                    </p>
                    <img src="img/memoria3.png">
                </li>
                <li>
                    <p>A <ln>2</ln> estem assignant el valor <w>18</w> en la zona
                    de memòria reservada per a la variable <w>edat</w>.</p>
                    <img src="img/memoria4.png">
                </li>
            </ul>
        </li>
    </ul>

    <h3>Tipus de variables</h3>
    <p>A la documentació oficial d'Oracle pots trobar els
        <a href="https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html">
        tipus de dades del llenguatge Java</a>. 
        En aquest curs utilitzarem més sovint els següents:</p>
    <ul>
        <li><w>int</w></li>
        <li><w>float</w></li>
        <li><w>boolean</w></li>
        <li><w>char</w></li>
        <li><w>String</w></li>
    </ul>

    <p>A la següent taula pots veure els valors que permeten guardar aquests tipus de dades:</p>

    <table>
        <thead><th>Tipus</th><th>Valors permesos</th></thead>
        <tr><td><w>int</w></td> <td>un número enter (entre <w>-2_147_483_648</w> i <w>2_147_483_647</w>)</td></tr>
        <tr><td><w>float</w></td><td>número decimal (e.g. <w>123.975f</w>)</td></tr>
        <tr><td><w>boolean</w></td><td>un booleà (<w>true</w> / <w>false</w>)</td></tr>
        <tr><td><w>char</w></td><td>un caracter (entre cometes simples, e.g. <w>'a'</w>)</td></tr>
        <tr><td><w>String</w></td><td>un string (entre cometes dobles, e.g. <w>"java"</w>)</td></tr>
    </table>

    <p>Aquí tens un exemple de declaració d'una variable de cada tipus:</p>

    <sc java>
        int edat = 18;
        float notaMitjana = 8.75f;
        boolean estaMatriculat = true;
        char grup = 'A';
        String email = "alumne@ins.com";
    </sc>

    <h3>Inferència de tipus</h3>
    <p>A partir de Java 10, es pot escriure <w>var</w> en lloc d'un tipus específic
    per a forçar la inferència de tipus basada en el tipus del valor assignat.</p>

    <sc java>
        var nomVariable = inicialització;
    </sc>

    <p>Aquí tens dos exemples:</p>
    <sc java>
        var llenguatge = "java";  // String
        var versio = 10;          // int
    </sc>

    <p>En aquest curs no utilitzarem la inferència de tipus, ja que utilitzarem
        fonamentalment la versió 8 de Java, que de moment segueix sent la més 
        utilitzada.
    </p>

    <quizz>
        <question single>
            <statement>
                <p>Donada la següent declaració d'una variable:</p>
                <sc java>String speed = "high";</sc>
                <p>Quin és el nom de la variable?</p>
            </statement>
            <o correct><m>speed</m></o>
            <o><m>"high"</m></o>
            <o><m>high</m></o>
            <o><m>String</m></o>
        </question>

        <question text>
            <statement>
                <p>Donat el següent codi:</p>
                <sc java>
                    int a = 10;
                    int b = 12;
                    int c = b;
                    int d = a;
                    int e = c;
                </sc>    
                <p>Introdueix el valor de la variable <w>e</w>.</p>
            </statement>

            <o>12</o>    
        </question>

        <question text>
            <statement>
                <p>Escriu el valor de cada variable, després de que s'executi 
                    cada sentència
                </p>
            </statement>

            <table>
                <tr> <th style="width: 15ch;"></th>                  <th style="width: 5ch;"><w>a</w></th> <th style="width: 5ch;"><w>b</w></th> <th style="width: 5ch;"><w>c</w></th>  </tr>
                <tr> <td><m>int a = 0;</m></td> <td><o>0</o></td> <td></td>         <td></td></tr>
                <tr> <td><m>int b = 0;</m></td> <td><o>0</o></td> <td><o>0</o></td> <td></td></tr>
                <tr> <td><m>a = 2;</m></td>     <td><o>2</o></td> <td><o>0</o></td> <td></td></tr>
                <tr> <td><m>int c = b;</m></td> <td><o>2</o></td> <td><o>0</o></td> <td><o>0</o></td></tr>
            </table>
        </question>

        <question single>
            <statement>
                <p>Quin és el valor d'aquesta variable?</p>
                <sc java>
                    String animal = "tigre";
                </sc>
            </statement>
            <o><m>"animal"</m></o>
            <o><m>"String"</m></o>
            <o><m>animal</m></o>
            <o correct><m>tigre</m></o>
        </question>

        <question single>
            <statement><p>L'operador d'assignació en Java és:</p></statement>
            <o><w>&lt;-</w></o>
            <o correct><w>=</w></o>
            <o><w>:=</w></o>
            <o><w>-&gt;</w></o>
        </question>

        <question multi>
            <statement><p>Selecciona les afirmacions correctes sobre les variables.</p></statement>
            <o correct>Una variable té un tipus específic</o>
            <o>El tipus determina el nom d'una variable</o>
            <o>No es pot assignar un valor a una variable</o>
            <o correct>Es pot llegir el valor d'una variable</o>
        </question>

        <question text>
            <statement><p>Quantes variables s'han declarat al següent codi?</p>
                <sc java>
                    int i = 0, j = 0, k = 0;
                    String s = "s", str = "str";
                </sc>
                <o>5</o>
            </statement>
        </question>

        <question multi>
            <statement><p>Selecciona les declaracions vàlides</p></statement>
            <o><w>float aFloat = "23.75f";</w></o>
            <o correct><w java>String mFloat = "98.7";</w></o>
            <o><w>int cFloat = 44.3;</w></o>
            <o><w>String kFloat = float;</w></o>
            <o correct><w>char dFloat = '.';</w></o>
            <o correct><w>String tFloat = "float";</w></o>
        </question>

        <question single>
            <statement>
                <p>El següent codi:</p>
                <sc java>
                    boolean turnedOn = true;
                    turnedOn = false;
                    String turnedOff = turnedOn;
                    System.out.println(turnedOff);
                </sc>
            </statement>
            <o>Imprimeix&nbsp;<m>false</m></o>
            <o>Imprimeix&nbsp;<m>true</m></o>
            <o>S'executa però dona un error</o>
            <o correct>No es pot executar</o>

        </question>
    </quizz>

    <challenge>
        <p>Resol aquests problemes:</p>
        <p><a href="https://www.hackerrank.com/contests/dam-m3/challenges/tipus-correctes">Tipus correctes</a></p>
        <p><a href="https://www.hackerrank.com/contests/dam-m3/challenges/valors-correctes">Valors correctes</a></p>
        <p><a href="https://www.hackerrank.com/contests/dam-m3/challenges/noms-correctes">Noms correctes</a></p>
    </challenge>
</section>

<section>
    <h2>Anomenar variables</h2>

    <h3>Per què el nom és important?</h3>
    <p>Com ja saps, cada variable té un nom que l'identifica de forma única respecte a les
        altres variables. Donar un bon nom a una variable potser no és tan simple com sembla.
        Els programadors amb experiència posen molt de compte en posar els noms per a fer els 
        seus programes més fàcils de comprendre. És molt important perquè els programadors
        dediquen molt de temps a llegir i comprendre programes escrits per altres programadors.
        Si les variables tenen noms dolents, inclús el teu propi codi et semblarà poc clar en uns
        pocs mesos.
    </p>
    <p>Sempre tracta de ser descriptiu i concís al posar nom a les variables. A la llarga 
        ho agrairàs.
    </p>

    <p>A més a més, per a posar noms has de seguir les regles i les convencions.</p>



    <h3>Regles per a anomenar variables</h3>
    <p>Les regles de Java per als noms de variables són:</p>
    <ul>
        <li>distingeix majúscules i minúscules</li>
        <li>pot incloure lletres Unicode, digits, i els caracters <w>$</w> &nbsp; <w>_</w></li>
        <li>no pot començar per un dígit</li>
        <li>no pot ser una paraula-clau (<w>class</w>, <w>static</w>, <w>void</w>, <w>int</w>, són il·legals)</li>
    </ul>
    <p>En base a aquestes regles, pots concloure que els espais en blanc no estan permesos en el nom
        d'una variable.
    </p>

    <warn>
        <p>Si trenques alguna d'aquestes regles el teu programa no funcionarà</p>
    </warn>

    <p>Aquí tens alguns exemples de noms vàlids:</p>
    <sc java>
        numero, $ident, bigValue, _val, abc, k
    </sc>

    <p>Aquests són invàlids:</p>
    <sc java>
        @ab, 1c, !ab, class
    </sc>



    <h3>Convencions per a anomenar variables</h3>
    <p>També hi ha una sèrie de convencions per a anomenar variables en Java:</p>
    <ul>
        <li>si el nom de la variable és una única paraula, s'escriu en minúscula (e.g. 
            <w>numero</w>, <w>preu</w>)
        </li>
        <li>si el nom de la variable inclou vàries paraules, s'han d'escriure en 
            <w>lowerCamelCase</w>, això és, la primera paraula ha de ser en minúscula i la resta 
            han de tenir la primera lletra en majúscula (e.g. <w>numeroDeMonedes</w>)
        </li>
        <li>no han de començar per <w>$</w> ni per <w>_</w>, encara que estigui permés</li>
        <li>escull noms amb significat, e.g <w>punts</w> té més sentit que <w>p</w>, tot i 
            que els dos són vàlids.</li>
    </ul>

    <p>Aquestes convencions són opcionals, tot i que es recomana seguir-les. Com hem dit 
        al principi, aquestes convencions faran el teu programa més legible per a tu i per
        als altres programadors Java.
    </p>

    <quizz>
        <question single>
            <statement><p>Vols declarar una variable anomenada <w>int</w>.</p>
            <p>Determina si el nom es vàlid o no (i per què?). Un nom és valid si el programa funcionarà.</p>
            </statement>

            <o>Es nom és vàlid</o>
            <o>El nom no és vàlid perquè no té sentit (què és int?)</o>
            <o>El nom no és vàlid perquè comença per una lletra</o>
            <o correct>El nom no és vàlid perquè és una paraula-clau</o>
        </question>

        <question multi>
            <statement><p>Selecciona els noms de variable vàlids, és a dir, que el programa funcionarà.</p></statement>
            <o>1poma</o>
            <o correct>numero1</o>
            <o>boolean</o>
            <o correct>_var</o>
        </question>

        <question text>
            <statement>
                <p>Recordes les convencions per anomenar variables? Fes que la variable
                    <w>ALTURA@CACTUS</w> no solament sigui sintàcticament correcta, sinò
                    que també compleixi les recomanacions.
                </p>
            </statement>
            <o>alturaCactus</o>
        </question>

        <question single>
            <statement>
                <p>Quin és el millor nom per una variable d'acord amb les convencions?</p>
            </statement>
            <o><m>_uha</m></o>
            <o correct><m>userHomeAdress</m></o>
            <o><m>userhomeaddress</m></o>
            <o><m>user_home_address</m></o>
            <o><m>UserHomeAddress</m></o>
        </question>
    </quizz>
</section>

<section>
    <h2>Escanejar l'entrada</h2>

    <p>L'<strong>entrada estàndard</strong> és un flux de dades que van cap al programa.
    Està suportada pel sistema operatiu. Per defecte, l'entrada estàndard obté les dades del 
    teclat, tot i que és possible redirigir-la per a obtenir les dades d'un fitxer.</p>
    <p>De fet, no tots els programes utilitzen l'entrada estàndard. Però nosaltres l'utilitzarem 
        molt sovint per a demanar dades als usuaris per teclat, o per a obtenir les dades dels casos
        de prova en els exercicis.
    </p>
        
    <p>La forma típica en que resoldrem problemes és aquesta:</p>
    <ol>
        <li><p>Llegir dades de l'entrada estàndard (<w>System.in</w>)</p></li>
        <li><p>Processar les dades per a obtenir un resultat</p></li>
        <li><p>Imprimir el resultat a la sortida estàndard (<w>System.out</w>)</p></li>
    </ol>

    <p>Aquest tipus de problemes de programació es poden provar fàcilment amb diferents 
        formats de dades d'entrada, i per aquest motiu, els utilitzarem molt.
    </p>

    <h3>Llegir dades amb un scanner</h3>

    <p>La forma més simple d'obtenir dades de l'entrada estàndard és utilitzar la 
        classe <w>Scanner</w>. Permet als programes llegir valors de diferents tipus
        (strings, números, etc.) de l'entrada estàndard.
    </p>

    <p>Per a utilitzar la classe <w>Scanner</w> s'ha d'afegir aquesta sentència d'importació 
    al principi del fitxer de codi:</p>

    <sc java>
        import java.util.Scanner;
    </sc>

    <p>Després s'ha d'afegir aquesta construcció a dintre del mètode <w>main</w>:</p>

    <sc java>
        Scanner scanner = new Scanner(System.in); 
    </sc>

    <p>En aquesta línia hem creat un objecte de la classe <w>Scanner</w>, que ens 
    permet utilitzar els seus mètodes. Aprendrem més sobre classes i objectes més 
    endavant. <w>System.in</w> indica que es llegirà el flux de dades de l'entrada 
    estàndard (habitualment, el teclat). De moment, no és necessari que comprenguis aquesta línia, solament 
    escriu-la exactament així.</p>

    <p>Anem a escriure el primer programa que llegeix dades del teclat:</p>

    <challenge>
        <p>Prova a escriure i executar aquest programa a l'IntelliJ.</p>
    </challenge>

    <sc java data-line="1,6,10,13">
        import java.util.Scanner; 

        public class Main {

            public static void main(String[] args) {
                Scanner scanner = new Scanner(System.in);  

                System.out.println("Hola, com et dius?");

                String nom = scanner.nextLine();

                System.out.print("Hola ");
                System.out.print(nom);
                System.out.println("!");
            }
        }
    </sc>


    
    <p>Quan l'executem, veurem el següent (en verd es mostra l'entrada 
        introduïda per teclat):
    </p>
    <shell>
        Hola, com et dius?
        <in>Josep Ramon</in> 
        Hola Josep Ramon!
    </shell>

    <p>Veiem pas a pas, l'execució del programa:</p>
    <ul>
        <li>A <ln>1</ln> importem la classe <w>Scanner</w></li>
        <li>A <ln>6</ln> creem l'objecte <w>scanner</w> que s'utilitza per llegir 
        dades introduïdes per teclat.</li>
        <li>A <ln>10</ln> utilitzem el mètode <w>nextLine()</w> per a llegir una 
        línia de dades del teclat. Guardem les dades llegides a la variable <w>nom</w></li>
        <li>A <ln>13</ln> imprimim la variable <w>nom</w>, que conté les dades que s'han 
        llegit a <ln>10</ln></li>
    </ul>

    <h3>Mètodes de la classe Scanner</h3>
    <p>Hi ha diversos mètodes a la classe <w>Scanner</w> que ens permeten llegir 
        diferents tipus de dades de l'entrada estàndard. En aquesta taula tens un
        resum dels mètodes que més utilitzarem en aquest curs: </p>
    <table>
        <thead><tr><th>Mètode</th><th>Tipus</th><th>Utilitat</th></tr></thead>
        <tr><td><w>nextInt()</w></td><td><w>int</w></td><td>llegeix un número enter</td></tr>
        <tr><td><w>nextFloat()</w></td><td><w>float</w></td><td>llegeix un número decimal</td></tr>
        <tr><td><w>nextBoolean()</w></td><td><w>boolean</w></td><td>llegeix un valor booleà</td></tr>
        <tr><td><w>next()</w></td><td><w>String</w></td><td>llegeix una paraula</td></tr>
        <tr><td><w>nextLine()</w></td><td><w>String</w></td><td>llegeix fins al final de línia</td></tr>
    </table>

    <p>Quan llegim dades utilitzant aquests mètodes hem d'utilitzar les variables del tipus 
        adequat per a guardar la dada que es llegeix. Per exemple:
    </p>

    <sc java>
        import java.util.Scanner;

        public class Main {
            public static void main(String[] args){
                Scanner scanner = new Scanner(System.in);

                int quantitat = scanner.nextInt();
                float preu = scanner.nextFloat();
                boolean pagat = scanner.nextBoolean();
                String codi = scanner.next();
                String nom = scanner.nextLine();

                System.out.println(quantitat);
                System.out.println(preu);
                System.out.println(pagat);
                System.out.println(codi);
                System.out.println(nom);
            }
        } 
    </sc>

    <shell>
        <in>5 1,99 true PR101 Galetes Maria</in>     
        5
        1.99
        true
        PR101
         Galetes Maria
    </shell>

    <observe>
        <p>Observa que el preu introduït per teclat s'ha escrit utilitzant una coma
        <w>,</w> en lloc d'un punt <w>.</w> per a separar les xifres decimals 
        (<w>1,99</w> en lloc de <w>1.99</w>). Això es degut a que l'<w>Scanner</w> 
        utilitza l'idioma del Sistema Operatiu per al format d'entrada, i en 
        castellà/català els decimals es separen amb una coma <w>,</w>. Si tinguèssim el 
        Sistema Operatiu configurat en anglès, caldria haver introduït el número decimal 
        utlitzant un punt.</p>

        <p>Es pot forçar a l'Scanner a utilitzar l'idioma anglès per al format de dades 
            d'entrada, és a dir, a utilitzar el punt en els decimals. Ho podem fer amb 
            el mètode <w>setLocale()</w>, just després de crear l'<w>scanner</w>, així:
        </p>

        <sc java>
            Scanner scanner = new Scanner(System.in);
            scanner.useLocale(Locale.US);   // usar el format angles
        </sc>

        <p>Per contra, els mètodes <w>print()</w> i <w>println()</w> sempre imprimeixen 
            separant els decimals amb un punt.
        </p>
    </observe>

    <p>Hem vist que cal utilitzar el <strong>tipus</strong> de variable adequat 
    al mètode que utilitzem per a llegir. Si no utilitzem el tipus adequat, el programa
    no s'executarà. Per exemple, no podem utilitzar una variable de tipus <w>String</w> 
    per a guardar un valor llegit amb <w>nextInt()</w>:</p>

    <sc java>
        String a = scanner.nextInt();   // error, cal utlitzar el tipus int
    </sc>

    <p>Per sort, l'IDE ens ajuda a detectar i solucionar aquests errors, indicant en 
        subratllat vermell l'error i proporcionant ajuda sobre com solucionar-lo:
    </p>

    <img src="img/typeerror.png">

    <h3>InputMismatchException</h3>
    <p>Una altre error que pot ocòrrer és que l'usuari no introdueixi una dada que 
        correspongui amb el tipus que s'ha de llegir. En aquest cas, el programa donarà 
        una excepció i s'aturarà inesperadament.
    </p>

    <p>Per exemple, el següent programa tracta de llegir un enter del teclat, però 
        l'usuari introdueix un text (<string>holaaa</string>). L'execució del programa s'abortarà amb una excepció 
        de tipus <w>InputMismatchException</w>:
    </p>

    <sc java>
        System.out.println("Introdueix un número:");
        int numero = scanner.nextInt();
    </sc>

    <shell>
        Introdueix un número:
        <in>holaaa</in>
        <exception>
        Exception in thread "main" java.util.<strong>InputMismatchException</strong>
            at java.base/java.util.Scanner.throwFor(Scanner.java:939)
            at java.base/java.util.Scanner.next(Scanner.java:1594)
            at java.base/java.util.Scanner.nextInt(Scanner.java:2258)
        </exception>
    </shell>

    <info>
        <p>Més endavant veurem com prevenir aquestes situacions, i fer el nostre 
        programa resistent a qualsevol entrada que introdueixi l'usuari.
        </p>
    </info>


    <h3>Consumir dades de l'entrada</h3>

    <p>Les crides als mètodes de lectura de l'<w>scanner</w> van consumint dades de l'entrada
        sempre que hi hagi, i si no hi han dades esperaran fins que hi hagin.
    </p>

    <p>Vegem-ho amb un exemple. Aquest programa llegeix dos números de l'entrada:</p>

    <sc java data-line="2,4">
        System.out.println("Introdueix el primer número:")
        int a = scanner.nextInt();
        System.out.println("Introdueix el segon número:")
        int b = scanner.nextInt();

        System.out.println("Els números introduïts són:")
        System.out.println(a);
        System.out.println(b);
    </sc>

    <p>Quan executem el programa, la primera crida a <w>nextInt()</w> <ln>2</ln>, quedarà 
    esperant a que l'usuari introdueixi un número. Si l'usuari <strong>introdueix un únic 
    número</strong>, aquest serà consumit de l'entrada i assignat a la variable <w>a</w>. 
    Quan es fa la segona crida a <w>nextInt()</w> <ln>4</ln>, el programa tornarà a esperar 
    a que s'introdueixi un altre número.</p>

    <shell>
        Introdueix el primer número:
        <in>1234</in>
        Introdueix el segon número:
        <in>6789</in>
        Els números introduïts són:
        1234
        6789
    </shell>

    <p>Però, si a la primera crida a <w>nextInt()</w> <ln>2</ln>, l'usuari <strong>introdueix 
    dos números</strong>, el primer d'ells serà consumit per l'<w>scanner</w> i assignat a la 
    variable <w>a</w>, i el segon número quedarà pendent per consumir. Així, a la segona crida 
    a <w>nextInt()</w> <ln>4</ln>, l'<w>scanner</w> no esperarà a que s'introdueixi un 
    altre número, sinò que consumirà el número que havia quedat per consumir i quedarà 
    assignat a la variable <w>b</w> sense esperar a que s'introdueixi un altre número.</p>
    <shell>
        Introdueix el primer número:
        <in>1234 6789</in>                    <comment>// introdueix dos numeros</comment>
        Introdueix el segon número:  <comment>// consumeix el segon número</comment>
        Els números introduïts són:
        1234
        6789
    </shell>

    <p>Hi ha situacions en què és una mica enrevesada la lectura de dades. Cal tenir en 
        compte la posició del cursor i la forma en que llegeixen les dades els mètodes.
    </p>

    <p>El primer a tenir en compte és que tots els mètodes, excepte el <w>nextLine()</w>, 
    descarten qualsevol espai-en-blanc o salt-de-línia que troben al flux de dades de l'entrada,
    fins que troben una dada per a llegir. Per contra, <w>nextLine()</w>, llegirà tots els 
    caracters (incloent espais-en-blanc) fins que trobi un salt-de-línia (que descartarà).</p>

    <p>Vejem els comportaments d'aquests mètodes amb varis exemples. Al flux de dades 
        d'entrada indicarem els espais-en-blanc amb el símbol <w>␣</w> i els salts-de-línia 
        amb el símbol <w>⏎</w>.
    </p>

    <ul>
        <li><p>Exemple 1</p>
            <p>Veiem un exmple amb el mètode <w>nextInt()</w>. Si tenim aquest programa:</p>

            <sc java>
                int a = scanner.nextInt();
            </sc>

            <p>i al flux d'entrada s'introdueix el següent:</p>

            <shell>
                ␣␣␣␣␣␣␣␣1234␣␣␣␣␣␣␣␣6789⏎
            </shell>

            <p>el mètode <w>nextInt()</w> descartarà els espais-en-blanc que hi ha al principi,
            i llegirà unicament el número <w>1234</w>. Els espais-en-blanc de després i el 
            número <w>6789</w> quedaran a l'espera de ser consumits.</p>

            <shell>
                <discard>␣␣␣␣␣␣␣␣</discard><consume>1234</consume>␣␣␣␣␣␣␣␣6789⏎
            </shell>

        </li>
        <li>
            <p>Exemple 2</p>
            <p>Si tenim aquest programa:</p>
            <sc java>
                boolean a = scanner.nextBoolean();
                float b = scanner.nextFloat();
                String c = scanner.next();
                int d = scanner.nextInt();
                String e = scanner.nextLine();
            </sc>

            <p>i al flux d'entrada tenim el següent:</p>

            <shell>
                ␣␣␣true␣␣⏎
                ␣14.5␣␣␣hola␣␣⏎
                ␣␣2345␣␣␣que tal?␣␣⏎
            </shell>

            <p>La crida a <w>nextBoolean()</w> descartarà els espais/salts fins a llegir 
            la dada <w>true</w>:</p>
                <shell>
                    <discard>␣␣␣</discard><consume>true</consume>␣␣⏎
                    ␣14.5␣␣␣hola␣␣⏎
                    ␣␣2345␣␣␣que tal?␣␣⏎
                </shell>

            <p>La crida a <w>nextFloat()</w> descartarà els espais/salts fins a llegir 
                la dada <w>14.5</w>:</p>
                <shell>
                    <consumed>␣␣␣true</consumed><discard>␣␣⏎</discard>
                    <discard>␣</discard><consume>14.5</consume>␣␣␣hola␣␣⏎
                    ␣␣2345␣␣␣que tal?␣␣⏎
                </shell>
            <p>La crida a <w>next()</w> ignorarà els espais/salts fins a llegir 
                la dada <w>hola</w>:</p>
                <shell>
                    <consumed>␣␣␣true␣␣⏎</consumed>
                    <consumed>␣14.5</consumed><discard>␣␣␣</discard><consume>hola</consume>␣␣⏎
                    ␣␣2345␣␣␣que tal?␣␣⏎
                </shell>
            <p>La crida a <w>nextInt()</w> ignorarà els espais/salts fins a llegir 
                la dada <w>2345</w>:</p>
                <shell>
                    <consumed>␣␣␣true␣␣⏎
                    >␣14.5␣␣␣hola</consumed><discard>␣␣⏎
                    ␣␣</discard><consume>2345</consume>␣␣␣que tal?␣␣⏎
                </shell>
            <p>La crida a <w>nextLine()</w> no descartarà els espais i llegirà 
                la dada <w>␣␣␣que tal?␣␣</w>, però sí que descartarà el salt-de-línia:</p>
                <shell>
                    <consumed>␣␣␣true⏎
                    14.5␣␣␣hola␣␣⏎
                    ␣␣2345</consumed><consume>␣␣␣que tal?␣␣</consume><discard>⏎</discard>
                </shell>
        </li>
        <li><p>Exemple 3</p>
            <p>Aquest exemple mostra una situació que és una font de confusió
                molt comuna quan s'està aprenent a utilitzar l'<w>Scanner</w>.            
            </p>
            <p>Considera el següent programa:</p>
            <sc java data-line="8,10">
                import java.util.Scanner;

                public class Main {
                    public static void main(String[] args){
                        Scanner scanner = new Scanner(System.in);

                        System.out.println("Introdueix un número:");
                        int numero = scanner.nextInt();
                        System.out.println("Introdueix un text:");
                        String text = scanner.nextLine();
                
                        System.out.println("El numero és " + numero);
                        System.out.println("El text és " + text);
                    }
                }
            </sc>

            <warn>
                <p>Abans de seguir amb l'exemple, és interessant que escriguis aquest programa
                i l'executis a l'IDE.</p>
            </warn>

            <p>Si has executat aquest programa, veuràs una comportament força extrany. El programa llegeix 
                correctament el número que introduïm <ln>8</ln>, però es "salta" la lectura del text <ln>10</ln>!
            </p>

            <shell>
                Introdueix un número:
                <in>1234</in>
                Introdueix un text:
                El numero és 1234
                El text és 
            </shell>

            <p>Veiem perquè ocorre això i com corregir-ho.</p>

            <p>Quan introduim un número i després polsem <kbd>Intro</kbd>, les dades que estem 
            posant a l'entrada estàndard són el número i un salt-de-línia:</p>

            <shell>
                1234⏎
            </shell>

            <p>La primera crida a <w>nextInt()</w> <ln>8</ln> llegeix el número, però no descarta el salt-de-línia:</p>

            <shell>
                <consume>1234</consume>⏎
            </shell>

            <p>La següent crida a <w>nextLine()</w> troba el salt-de-línia i el descarta. Per tant el que ha llegit 
            és un <w>String</w> buit, i per això no ha esperat a que s'introdueixin més dades a l'entrada.</p>
            <shell>
                <consumed>1234</consumed><discard>⏎</discard>
            </shell>

            <p>La forma de corregir aquest error, és realitzar un <w>nextLine()</w> <strong>extra</strong> per 
            a que consumeixi el salt-de-línia que hi ha a continuació del número. El programa quedaria així:</p>

            <sc java data-line="2,3,5">
                System.out.println("Introdueix un número:");
                int numero = scanner.nextInt();
                scanner.nextLine();   // consumim el salt-de-linia
                System.out.println("Introdueix un text:");
                String text = scanner.nextLine();
            </sc>

            <p>D'aquesta manera el primer <w>nextInt()</w> <ln>2</ln> llegirà el número:</p>

            <shell>
                <consume>1234</consume>⏎
            </shell>

            <p>El següent <w>nextLine()</w> <ln>3</ln> descartarà el salt-de-línia</p>
            <shell>
                <consumed>1234</consumed><discard>⏎</discard>
            </shell>

            <p>Com ja no queden dades a consumir a l'entrada, el <w>nextLine()</w> <ln>5</ln> esperarà 
            a que s'introdueixin més dades a l'entrada.</p>

            <info>
                <p>
                    Com a norma general, quan llegim dades línia a línia, 
                    haurem de posar un <w>nextLine()</w> <strong>extra</strong> 
                    enmig d'un
                    <br><w>nextInt()</w>, <w>nextBoolean()</w>, <w>nextFloat()</w> o <w>next()</w>, 
                    <br>i un 
                    <br><w>nextLine()</w>.
                </p>
            </info>
        </li>

        <li>
            <p>Exemple 4</p>
            <p>L'últim exemple que veurem també és una situació que sovint costa de resoldre, i que
                es dona quan llegim diferents dades en una mateixa línia.
            </p>

            <p>Considerem aquest programa:</p>
            <sc java data-line="2,3">
                System.out.println("Introdueixi la seva edat i el seu nom:");
                int edat = scanner.nextInt();
                String nom = scanner.nextLine();
        
                System.out.println("Edat:");
                System.out.println(edat);
                System.out.println("Nom:");
                System.out.println(nom);
            </sc>

            <shell>
                Introdueixi la seva edat i el seu nom:
                <in>24 Joan Ramon</in>
                Edat:
                24
                Nom:
                Joan Ramon
            </shell>

            <p>En aquest programa, l'usuari introdueix l'edat i el nom a la mateixa línia. L'edat es llegeix correctament 
                però observa l'espai-en-blanc que s'ha llegit abans del nom.
            </p>

            <p>La crida a <w>nextInt()</w> <ln>2</ln> ha llegit el número, i ha deixat el cursor just a continuació:</p>
            <shell>
                <consume>24</consume>␣Joan␣Ramon⏎
            </shell>

            <p>Com el <w>nextLine()</w> <ln>3</ln> no descarta els espais, ha llegit els caracters restants fins el salt-de-línia.</p>
            <shell>
                <consumed>24</consumed><consume>␣Joan␣Ramon</consume><discard>⏎</discard>
            </shell>

            <p>Per a corregir aquesta anomalia, podem utilitzar el mètode <w>trim()</w>, que elimina els espais 
            en blanc al principi d'un text. Així, quan vulguem llegir una línia, i estar segurs de que no tindrem 
            espais molests al principi, ho podem fer així: <w>nextLine().trim()</w>.</p>

            <p>El programa quedaria així:</p>
            <sc java data-line="3">
                System.out.println("Introdueixi la seva edat i el seu nom:");
                int edat = scanner.nextInt();
                String nom = scanner.nextLine().trim();   // eliminem els espais al principi
        
                System.out.println("Edat:");
                System.out.println(edat);
                System.out.println("Nom:");
                System.out.println(nom);
            </sc>
        </li>
    </ul>
    
    <quizz>
        <question match>
            <statement><p>Fes coincidir els mètodes de la classe <w>Scanner</w> amb el tipus de valor que llegeixen.</p></statement>
            <o>nextInt()</o><o>int</o>
            <o>nextBoolean()</o><o>boolean</o>
            <o>nextFloat()</o><o>float</o>
            <o>next()</o><o>String</o>
        </question>

        <question single>
            <statement>
                <p>Invoquem el mètode <w>next()</w> i introduïm el número <w>9</w> a l'entrada estàndard, quin tipus 
                    de dada serà?</p>
            </statement>
            <o correct>String</o>
            <o>char</o>
            <o>int</o>
            <o>float</o>
        </question>
    </quizz>
    <challenge>
        <p><a href="https://www.hackerrank.com/contests/dam-m3/challenges/a-hello-you">Hello you</a></p>
        <p><a href="https://www.hackerrank.com/contests/dam-m3/challenges/cada-paraula-a-una-linia">Cada paraula a una línia</a></p>
        <p><a href="https://www.hackerrank.com/contests/dam-m3/challenges/contractar-un-xef">Contractar un xef</a></p>
        <p><a href="https://www.hackerrank.com/contests/dam-m3/challenges/carta-formal">Carta formal</a></p>
        <p><a href="https://www.hackerrank.com/contests/dam-m3/challenges/arxius-de-codi-font">Arxius de codi font</a></p>         
    </challenge>

    <project>
        <p>Completa l'Etapa 2 del <a href="/chatbot#section2">projecte ChatBOT</a></p>
    </project>

</section>