
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>Dades Compostes</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/codelab-elements/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="UA-49880327-14"></google-codelab-analytics>
  <google-codelab codelab-gaid=""
                  id="objectes"
                  title="Dades Compostes"
                  environment="web"
                  feedback-link="https://github.com/gerardfp">
    
      <google-codelab-step label="Introducció" duration="0">
        <p>L&#39;objectiu d&#39;aquesta pràctica és començar a usar els conceptes de <strong>Classe </strong>i <strong>Objecte</strong>. Consisteix en desenvolupar una aplicació que mostri un dibuix simple fet amb figures geomètriques.</p>
<p class="image-container"><img style="width: 257.15px" src="img/1f751d77c75b1f4d.png"></p>
<p>Al dibuix veiem una casa (mur, teulada i finestra) sobre la terra i un sol al cel.</p>
<p>El dibuix es composarà dels següents <strong>Objectes</strong>: <em>sun, sky, earth, wall, window </em>y<em> roof</em></p>
<p>Aquests objectes estaran classificats en les següents <strong>Classes</strong>: <em>Circle</em>, <em>Rectangle </em>y <em>Triangle</em></p>


      </google-codelab-step>
    
      <google-codelab-step label="Crea el projecte" duration="0">
        <p>Inicia IntelliJ i crea un nou projecte: </p>
<p class="image-container"><img style="width: 548.00px" src="img/9301fcf1aef3ff38.png"></p>
<p>Recorda marcar la opció &#34;<em>Create project from template</em>&#34; i selecciona la plantilla &#34;<em>Command Line App</em>&#34;:</p>
<p class="image-container"><img style="width: 548.00px" src="img/31eecd71df96c9f3.png"></p>
<p>Posa-li el nom <sc>DadesCompostes</sc>:</p>
<p class="image-container"><img style="width: 547.00px" src="img/690184a7ac382746.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Crea la classe Circle" duration="0">
        <p>Per a crear objectes, primer s&#39;ha de definir la classe. A partir de la classe es creen els objectes.</p>
<p>Començarem per l&#39;objecte <em>sun</em>, que és de la classe <em>Circle</em>.</p>
<p>Fes clic-dreta sobre el <em>package </em><sc>com.company</sc>, i selecciona les opcions <sc>New</sc> &gt; <sc>Java class</sc>:</p>
<p class="image-container"><img style="width: 658.00px" src="img/fc6f4ce138913128.gif"></p>
<p>Com a nom de la Classe introdueix <sc>Circle</sc></p>
<aside class="warning"><p><strong>Important</strong>: El nom de les classes comença amb majúscula (UpperCamelCase)</p>
</aside>
<p>Polsa OK.</p>
<p class="image-container"><img style="width: 374.00px" src="img/fccc5699f45afce0.png"></p>
<p>Observa que s&#39;ha creat el fitxer <sc>Circle.java</sc>, amb la definició de la classe <sc>Circle</sc>:</p>
<pre><sc>class Circle {
}</sc></pre>


      </google-codelab-step>
    
      <google-codelab-step label="Crea l&#39;objecte sun" duration="0">
        <p>Un cop definida la classe <sc>Circle</sc>, es poden crear objectes d&#39;aquesta classe. Anem a crear l&#39;objecte <em><sc>sun</sc></em>:</p>
<p>Ves l&#39;arxiu <sc>Main.java</sc> i dintre del mètode  <sc>main</sc> afegeix el códi per a crear l&#39;objecte  <sc>sun</sc>.</p>
<pre><sc>public class Main {
   public static void main(String[] args) {
       Circle sun = new Circle();
   }
}</sc></pre>
<p class="image-container"><img style="width: 736.40px" src="img/cd9c44245121ded7.gif"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Defineix els camps de la classe Circle" duration="0">
        <p>Definirem l&#39;estat dels objectes de classe <sc>Circle</sc> (com l&#39;objecte <sc>sun</sc>), amb els següents camps:</p>
<ul>
<li>Longitud del radi</li>
<li>Posició: coordenades X i Y</li>
<li>Color </li>
</ul>
<p>Ves a l&#39;arxiu <sc>Circle.java</sc> i afegeix els següents camps a la classe <sc>Circle</sc>:</p>
<pre><sc>public class Circle {
   int radius;
   int positionX;
   int positionY;
   Color color;
}</sc></pre>
<p>Hauràs notat que la paraula  <sc>Color</sc> apareix en vermell. És degut a que no està definida la classe <sc>Color</sc>. No obstant, aquesta classe no la crearem nosaltres, sinò que la usarem de la biblioteca <sc>java.awt</sc></p>
<p>Per a importar la classe <sc>Color</sc> de la biblioteca <sc>java.awt</sc> segueix aquestes passes:</p>
<ol type="1" start="1">
<li>Coloca el cursor sobre la paraula <sc>Color</sc></li>
<li>Mou el cursor amb les fletxes del teclat</li>
<li>Quan la paraula <sc>Color</sc> estigui subratllada, apareixerà un missatge blau sobre ella. Polsa <sc>Alt+Intro</sc></li>
<li>Apareixerà una llista a sota amb les biblioteques que inclouen la classe <sc>Color</sc>. Selecciona la biblioteca <sc>Color (java.awt)</sc></li>
</ol>
<p class="image-container"><img style="width: 427.00px" src="img/db4203b223f71ffe.gif"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Defineix l&#39;estat de l&#39;objecte sun" duration="0">
        <p>Ara l&#39;objecte <sc>sun</sc> ja té els camps de la classe <sc>Circle</sc>, així que podem definir el seu estat.</p>
<p>Ves a l&#39;arxiu <sc>Main.java</sc> i assigna els següents valors als camps que defineixen l&#39;estat de l&#39;objecte <sc>sun</sc>:</p>
<pre><sc>public class Main {
   public static void main(String[] args){
       Circle sun = new Circle();
       sun.radius = 40;
       sun.positionX = 440;
       sun.positionY = 50;
       sun.color = Color.YELLOW;
   }
}</sc></pre>
<p>Ja tenim creat l&#39;objecte <sc>sun</sc>, i hem definit el seu estat. </p>


      </google-codelab-step>
    
      <google-codelab-step label="Pinta l&#39;objecte sun" duration="0">
        <p>Per a dibuixar els objectes a la pantalla utilizarem la Classe <sc>JFrame</sc>, de la biblioteca gràfica <sc>Swing</sc>, per a crear una finestra que serà el nostre llenç (<em>canvas</em>). De moment no és necesari que comprenguis aquesta Classe. Simplement copia i enganxa.</p>
<p>Crea una Classe nova anomenada <sc>Canvas</sc> i escriu en ella el següent codi:</p>
<pre><sc>import javax.swing.*;
import java.awt.*;
import java.util.ArrayList;
import java.util.List;

public class Canvas extends javax.swing.JPanel {
   static Canvas canvas;
   static List&lt;Object&gt; objects = new ArrayList&lt;&gt;();

   public Canvas() {
       JFrame frame = new JFrame();
       frame.add(this);
       frame.setSize(600, 400);
       frame.setVisible(true);
       frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
   }

   @Override
   public void paint(Graphics g) {
       for(Object o: objects) try {
           Class c = o.getClass(); String n = c.getName();
           if(!n.endsWith(&#34;.Circle&#34;)&amp;&amp;!n.endsWith(&#34;.Rectangle&#34;)&amp;&amp;!n.endsWith(&#34;.Triangle&#34;))continue;
           int x = (int) c.getDeclaredField(&#34;positionX&#34;).get(o);
           int y = (int) c.getDeclaredField(&#34;positionY&#34;).get(o);
           g.setColor((Color) c.getDeclaredField(&#34;color&#34;).get(o));
           if (n.endsWith(&#34;.Circle&#34;)) {
               int r = (int) c.getDeclaredField(&#34;radius&#34;).get(o);
               g.fillOval(x, y, r * 2, r * 2);
           } else {
               int w = (int) c.getDeclaredField(&#34;width&#34;).get(o);
               int h = (int) c.getDeclaredField(&#34;height&#34;).get(o);
               if (n.endsWith(&#34;.Rectangle&#34;)) g.fillRect(x, y, w, h);
               else g.fillPolygon(new int[]{x,x+w/2,x+w},new int[]{y+h,y,y+h},3);
           }
       } catch (Exception e){ e.printStackTrace(); }
   }

   public static void draw(Object c) {
       if(canvas==null) canvas = new Canvas();
       objects.add(c);
   }
}</sc></pre>
<h2 is-upgraded>Usa la classe  <sc>Canvas </sc>per a dibuixar les figures </h2>
<p>Afegeix al mètode  <sc>main</sc>  el següent codi:</p>
<pre><sc>Canvas.draw(sun);</sc></pre>
<h2 is-upgraded>Executa el programa</h2>
<p>Polsa sobre el botó <sc>Run</sc> (o <sc>Mayus+F10</sc>):</p>
<p class="image-container"><img style="width: 196.00px" src="img/d0a46c81fa1af544.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Crea els objectes window i earth" duration="0">
        <p>Seguim amb la resta d&#39;objectes del nostre dibuix. </p>
<p>Seguim amb els objectes <sc>window</sc> i <sc>earth</sc>. Com són de la Classe <sc>Circle</sc>, que ja està definida, ja podem crear-los.</p>
<p>Afegeix el següent codi al mètode  <sc>main</sc>  (just a continuació del codi de l&#39;objecte  <sc>sun</sc>):</p>
<pre><sc>public class Main {
   public static void main(String[] args){
       Circle sun = new Circle();
       sun.color = Color.YELLOW;
       sun.positionX = 440;
       sun.positionY = 50;
       sun.radius = 40;

       Circle window = new Circle();
       window.color = Color.GRAY;
       window.positionX = 240;
       window.positionY = 215;
       window.radius = 10;

       Circle earth = new Circle();
       earth.color = Color.GREEN;
       earth.positionX = -300;
       earth.positionY = 250;
       earth.radius = 600;
   }
}</sc></pre>
<h2 is-upgraded>Usa la classe  <sc>Canvas </sc>per a dibuixar les figures </h2>
<p>Afegeix al mètode  <sc>main</sc>  el següent codi:</p>
<pre><sc>Canvas.draw(earth);
Canvas.draw(window);</sc></pre>


      </google-codelab-step>
    
      <google-codelab-step label="Defineix les classes Rectangle i Triangle." duration="0">
        <p>Un cop creats tots els objectes de tipus cercle, seguirem amb els rectangles (<em>wall</em>, <em>sky</em>) i triangles (<em>roof</em>).</p>
<p>Crea les classes <sc>Rectangle</sc> i <sc>Triangle</sc>, i afegeix en elles els camps que defineixen el seu estat.</p>
<pre><sc>public class Rectangle {
   int width;
   int height;
   int positionX;
   int positionY;
   Color color;
}</sc></pre>
<pre><sc>public class Triangle {
   int width;
   int height;
   int positionX;
   int positionY;
   Color color;
}</sc></pre>


      </google-codelab-step>
    
      <google-codelab-step label="Crea els objectes sky, wall i roof" duration="0">
        <p>Torna a l&#39;arxiu <sc>Main.java</sc> i afegeix el següent codi:</p>
<pre><sc>Rectangle wall = new Rectangle();
wall.width = 100;
wall.height = 80;
wall.positionX = 200;
wall.positionY = 200;
wall.color = Color.WHITE;

Rectangle sky = new Rectangle();
sky.width = 600;
sky.height = 400;
sky.positionX = 0;
sky.positionY = 0;
sky.color = Color.CYAN;

Triangle roof = new Triangle();
roof.width = 100;
roof.height = 50;
roof.positionX = 200;
roof.positionY = 150;
roof.color = Color.RED;</sc></pre>
<h2 is-upgraded>Usa la Classe  <sc>Canvas </sc>per a dibuixar les figures </h2>
<p>Afegeix al mètode  <sc>main</sc>  el següent codi:</p>
<pre><sc>Canvas.draw(sky);
Canvas.draw(wall);
Canvas.draw(roof);</sc></pre>


      </google-codelab-step>
    
      <google-codelab-step label="Comprenent les Classes i els Objectes" duration="0">
        <p>Les Classes es poden entendre com una plantilla a partir de la qual es poden crear Objectes. Cada Objecte és una còpia diferent de la plantilla. Per tant cada Objecte té una còpia dels camps que s&#39;han definit a la Classe. Es poden assignar diferents valors a cada camp de cada Objecte de forma independent.</p>
<p>El següent gràfic explica les Classes i Objectes que s&#39;han creat per a fer el dibuix:</p>
<p class="image-container"><img style="width: 736.10px" src="img/83bb163ca260a6cc.png"></p>
<p>Els objectes s&#39;emmagatzemen a la memòria de l&#39;ordinador. Com és evident, a la memòria no s&#39;hi poden dibuixar cercles, rectangles, ni triangles. En realitat el que s&#39;està emmagatzemant en memòria és la informació sobre aquests objectes, és a dir els valors dels seus camps. Una representació més adequada dels objectes seria aquesta:</p>
<p class="image-container"><img style="width: 736.10px" src="img/e5951ac7b9a9be14.png"></p>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/codelab-elements/native-shim.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/prettify.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/codelab-elements.js"></script>

</body>
</html>
